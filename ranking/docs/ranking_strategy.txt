现状：
1	读取各个黑名单

2 	获取用户的意图类别

3	获取社会化相关信息

4	按时间序排序

5	如果是电影意图
	5.1	则启动类别过滤
	5.2	DA传来的fwnum和likenum字段有值
	5.3	读取filter阈值，转1 2 4 赞1 5 10
	5.4	遍历所有微博，统计各个分档的微博个数
	5.5	只要任何一档次满足过滤阈值（100）：设置对应的fitler值、启动意图电影过滤

6	读取有效转发数，开始分档
	6.1	获取doc的社会化关系和good uid列表
	6.2	检查是否是有效mid，不是跳过不参与分档
	6.3	如果是good uid或者有social关系，则不过黑名单；否则检查黑名单，命中则删除；
	6.4	检查是否是黑来源
	6.5	更新有效粉丝，根据周、月粉丝词典
	6.6	根据qi对该doc进行分档
	6.6	是否低质的蓝V或差的来源
	6.6	是否满足有效转发阈值
	6.7	是否满足电影优质筛选阈值
	6.8	根据docattr判断是否满足类别过滤阈值
	
	if/else逻辑（选择a..e其中一个）：  1 检索人和微博作者是社交关系， 2 微博作者和微博正文里面的@昵称是社交关系 （is_social值的含义）
	6.a	is_social 1:	DEGREE_15_SOCIAL，	判重，	该分档++； is_dup_update_doc
	6.b	good uid:	DEGREE_14_VIP,		判重，	该分档++； is_dup_update_doc
	6.c	is_social 2:	DEGREE_12_SOCIAL_AT,	判重，		； is_dup_update_doc
		1	重复：	判为DEGREE_3_DUP_DUP 或 DEGREE_4_DUP
		2	不重：	DEGREE_12_SOCIAL_AT，	，	该分档++；

	6.d	符合电影筛选、有效转发数、符合电影实体词，
		  条件同时成立，DEGREE_11_VALIDFWNUM；	判重，		； is_dup_update_doc
		  1	重复：	判为DEGREE_3_DUP_DUP 或 DEGREE_4_DUP
		  2	不重：	DEGREE_11_VALIDFWNUM，	，	该分档++；	

	6.e	不满足a..d的所有条件：
		1	根据degree和qi分档需要删除的：直接删除！ degree_0++
		2	否则，[黑来源] 或者 [差的vip、来源] 或者 [不符合电影过滤阈值] 或者 [qi质量<3] 或者 [非电影实体词]： DEGREE_7_NOACT_DUP
		3	否则，{qi质量 >3//这个约束多余} , DEGREE_9_GOOD, 判重：
			11	重复：判为DEGREE_3_DUP_DUP 或 DEGREE_4_DUP
			22 	不重：判为DEGREE_9_GOOD

	6.9	分类结束，信息汇总：如果doc小于DEGREE_9_GOOD， degree_small++；
		否则，topN_top++

	6.10	DupClusterActOneUpdate 后期再理解

	6.11	根据降级与否，判断top数量是否足够：topN_top > data.cluster_top_buff * data.keep_top_n （5*100）
		够了，结束分档，否则继续

预期：
对分档的配置解析

对ac数据的逆波兰表达实现 rsync ac_expr.c ac_expr.h 10.73.12.132::MINI_SEARCH/guanli/

目前分为优质，低质，垃圾三个档次
优质：在前N选优保留的微博，参与展示，包括聚合等等
低质：前N里面的非优质，非垃圾和在前N之后的所有非垃圾
垃圾：黑名单 作弊 等等一定不展示的微博

优质的包含固定的用户微博vip用户，关注人和有效转>1 qi优质白名单等。------------------------> 需要考虑【有效转>1】是否在这里面去掉，这个应该是非常固定的用户微博不需要变动

	【判断 优质的 微博特征 需要可以配置】

举个例子：比如这次电影修改，优质的条件就是fwnum>1 || likenum>10
所以 这些特征应该都可以通过da修改参数通知ac，获取不同的filter条件

同时可以做到自动根据数量 【多档次自动设定】

比如对电影修改为：
	命中实体词一档，
	fwnum>4 || likenum>20 二档，
	fwnum>1 || likenum>10 三档，

	当一档结果大于100，把优质条件设定为必须符合一档
	当一档小于100，但是一档和二档总和大于100，优质的条件自动变为 命中实体词 或者 fwnum>4 || likenum>20
	依次类推，最后档次的个数和每一个档次的条件都是随意设置的


推理：
现在区分优质有否的分界线是：
1	符合电影筛选 且 有有效转发数 且 没有启动类别过滤：同时满足则不重复时是优质 11 
2	非黑来源 且 好的来源和vip 且 符合电影阈值 且 qi质量>=3 且 不需要类别过滤：不重复时是优质 9

1 和 2 之间的异同：有有效转发数， 这个是唯一多出来的条件，因为没有这个导致后来即使符合 也是9；这个有点怪异；
如果去掉这条，则2的逻辑似乎可以去掉了；

自动分档：
目前就是自动分档，就是高档到抵挡依次适配；

所以问题在哪里？






